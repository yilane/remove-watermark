<!--pages/history/history.wxml-->
<view class="container">
  <!-- ç­›é€‰å™¨ -->
  <view class="filter-bar">
          <picker bindchange="onStatusChange" value="{{statusIndex}}" range="{{statusOptions}}">
        <view class="filter-item">
          <text>{{statusOptions[statusIndex]}}</text>
          <text class="arrow-icon">â–¼</text>
        </view>
      </picker>
      <picker mode="date" bindchange="onDateChange" value="{{selectedDate}}">
        <view class="filter-item">
          <text>{{selectedDate || 'é€‰æ‹©æ—¥æœŸ'}}</text>
          <text class="arrow-icon">â–¼</text>
        </view>
      </picker>
  </view>

  <!-- å†å²è®°å½•åˆ—è¡¨ -->
  <view class="history-list" wx:if="{{historyList.length > 0}}">
    <view 
      class="history-item" 
      wx:for="{{historyList}}" 
      wx:key="id"
      bindtap="viewDetail"
      data-id="{{item.id}}"
    >
      <image class="thumbnail" src="{{item.thumbnail}}" mode="aspectFill" />
      <view class="item-info">
        <text class="title">{{item.title}}</text>
        <text class="time">{{item.createTime}}</text>
        <view class="tags">
          <text class="tag mode-tag">{{item.mode}}</text>
          <view class="status-badge status-{{item.status}}">
            {{item.statusText}}
          </view>
        </view>
      </view>
      <view class="item-actions">
        <text 
          class="action-icon" 
          bindtap="deleteItem"
          data-id="{{item.id}}"
        >ğŸ—‘ï¸</text>
      </view>
    </view>
  </view>

      <!-- ç©ºçŠ¶æ€ -->
    <view class="empty-state" wx:else>
      <text class="empty-icon">ğŸ“‹</text>
      <text class="empty-text">æš‚æ— å†å²è®°å½•</text>
      <button class="start-btn" bindtap="startNew">å¼€å§‹ç¬¬ä¸€æ¬¡ä¿®å¤</button>
    </view>
</view>
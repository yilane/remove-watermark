<!--pages/history/history.wxml-->
<view class="container">
  <!-- 筛选器 -->
  <view class="filter-bar">
          <picker bindchange="onStatusChange" value="{{statusIndex}}" range="{{statusOptions}}">
        <view class="filter-item">
          <text>{{statusOptions[statusIndex]}}</text>
          <text class="arrow-icon">▼</text>
        </view>
      </picker>
      <picker mode="date" bindchange="onDateChange" value="{{selectedDate}}">
        <view class="filter-item">
          <text>{{selectedDate || '选择日期'}}</text>
          <text class="arrow-icon">▼</text>
        </view>
      </picker>
  </view>

  <!-- 历史记录列表 -->
  <view class="history-list" wx:if="{{historyList.length > 0}}">
    <view 
      class="history-item" 
      wx:for="{{historyList}}" 
      wx:key="id"
      bindtap="viewDetail"
      data-id="{{item.id}}"
    >
      <image class="thumbnail" src="{{item.thumbnail}}" mode="aspectFill" />
      <view class="item-info">
        <text class="title">{{item.title}}</text>
        <text class="time">{{item.createTime}}</text>
        <view class="tags">
          <text class="tag mode-tag">{{item.mode}}</text>
          <view class="status-badge status-{{item.status}}">
            {{item.statusText}}
          </view>
        </view>
      </view>
      <view class="item-actions">
        <text 
          class="action-icon" 
          bindtap="deleteItem"
          data-id="{{item.id}}"
        >🗑️</text>
      </view>
    </view>
  </view>

      <!-- 空状态 -->
    <view class="empty-state" wx:else>
      <text class="empty-icon">📋</text>
      <text class="empty-text">暂无历史记录</text>
      <button class="start-btn" bindtap="startNew">开始第一次修复</button>
    </view>
</view>
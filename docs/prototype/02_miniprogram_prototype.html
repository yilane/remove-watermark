<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IOPaint 小程序原型</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f5f5f5;
            overflow-x: hidden;
        }

        .container {
            max-width: 375px;
            margin: 0 auto;
            background: white;
            min-height: 100vh;
            position: relative;
        }

        /* 通用样式 */
        .page {
            display: none;
            min-height: 100vh;
            padding-bottom: 60px;
        }

        .page.active {
            display: block;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            text-align: center;
            position: sticky;
            top: 0;
            z-index: 10;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: white;
            color: #333;
            border: 1px solid #ddd;
        }

        /* 底部导航 */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 375px;
            background: white;
            display: flex;
            border-top: 1px solid #eee;
            z-index: 100;
        }

        .nav-item {
            flex: 1;
            text-align: center;
            padding: 10px;
            cursor: pointer;
            transition: color 0.3s;
        }

        .nav-item.active {
            color: #667eea;
        }

        .nav-icon {
            font-size: 20px;
            margin-bottom: 4px;
        }

        .nav-text {
            font-size: 12px;
        }

        /* 登录页面 */
        .login-page {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            text-align: center;
            padding: 40px 20px;
        }

        .logo {
            width: 100px;
            height: 100px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
            margin-bottom: 30px;
        }

        .app-title {
            font-size: 28px;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .app-subtitle {
            font-size: 16px;
            opacity: 0.8;
            margin-bottom: 50px;
        }

        .login-btn {
            background: white;
            color: #667eea;
            padding: 15px 50px;
            border-radius: 30px;
            font-size: 18px;
            font-weight: bold;
        }

        /* 首页 */
        .upload-area {
            margin: 30px 20px;
            padding: 60px 20px;
            border: 2px dashed #ddd;
            border-radius: 15px;
            text-align: center;
            background: #fafafa;
            cursor: pointer;
            transition: all 0.3s;
        }

        .upload-area:hover {
            border-color: #667eea;
            background: #f0f2ff;
        }

        .upload-icon {
            font-size: 48px;
            color: #999;
            margin-bottom: 15px;
        }

        .upload-text {
            color: #666;
            font-size: 16px;
        }

        .quick-actions {
            display: flex;
            gap: 15px;
            padding: 20px;
        }

        .action-btn {
            flex: 1;
            padding: 15px;
            background: white;
            border: 1px solid #eee;
            border-radius: 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .action-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .action-icon {
            font-size: 24px;
            margin-bottom: 8px;
            color: #667eea;
        }

        /* 编辑器页面 */
        .editor-container {
            padding: 20px;
        }

        .canvas-area {
            width: 100%;
            height: 300px;
            background: #f0f0f0;
            border-radius: 10px;
            margin-bottom: 20px;
            position: relative;
            overflow: hidden;
        }

        .preview-image {
            width: 100%;
            height: 100%;
            object-fit: contain;
            border-radius: 10px;
        }

        .tools-bar {
            display: flex;
            justify-content: space-around;
            padding: 15px;
            background: white;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .tool-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            border: none;
            background: #f5f5f5;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .tool-btn.active {
            background: #667eea;
            color: white;
        }

        .model-settings {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .setting-item {
            margin-bottom: 15px;
        }

        .setting-label {
            font-weight: bold;
            margin-bottom: 8px;
            color: #333;
        }

        .setting-select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
        }

        .slider {
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: #ddd;
            outline: none;
            -webkit-appearance: none;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #667eea;
            cursor: pointer;
        }

        .process-btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
        }

        /* 进度页面 */
        .progress-container {
            padding: 40px 20px;
            text-align: center;
        }

        .progress-circle {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: conic-gradient(#667eea 0deg, #667eea 108deg, #f0f0f0 108deg);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 30px auto;
            position: relative;
        }

        .progress-circle::before {
            content: '';
            width: 80px;
            height: 80px;
            background: white;
            border-radius: 50%;
            position: absolute;
        }

        .progress-text {
            position: relative;
            z-index: 1;
            font-size: 18px;
            font-weight: bold;
            color: #667eea;
        }

        .progress-status {
            font-size: 16px;
            color: #666;
            margin-top: 20px;
        }

        .eta-info {
            background: #f0f2ff;
            padding: 15px;
            border-radius: 10px;
            margin-top: 30px;
            color: #667eea;
        }

        /* 结果页面 */
        .result-container {
            padding: 20px;
        }

        .comparison-view {
            position: relative;
            height: 300px;
            background: #f0f0f0;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 20px;
        }

        .before-after {
            display: flex;
            height: 100%;
        }

        .before-image, .after-image {
            flex: 1;
            background-size: cover;
            background-position: center;
            position: relative;
        }

        .image-label {
            position: absolute;
            top: 10px;
            left: 10px;
            background: rgba(0,0,0,0.7);
            color: white;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 12px;
        }

        .result-actions {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .action-button {
            flex: 1;
            padding: 12px;
            text-align: center;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
        }

        .save-btn {
            background: #667eea;
            color: white;
        }

        .share-btn {
            background: #52c41a;
            color: white;
        }

        .continue-btn {
            background: #ff7a45;
            color: white;
        }

        /* 个人中心 */
        .profile-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 30px 20px;
            color: white;
            text-align: center;
        }

        .avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: rgba(255,255,255,0.2);
            margin: 0 auto 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
        }

        .username {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 8px;
        }

        .user-stats {
            font-size: 14px;
            opacity: 0.9;
        }

        .menu-list {
            padding: 20px;
        }

        .menu-item {
            display: flex;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid #f0f0f0;
            cursor: pointer;
        }

        .menu-icon {
            width: 40px;
            font-size: 20px;
            color: #667eea;
        }

        .menu-text {
            flex: 1;
            font-size: 16px;
            color: #333;
        }

        .menu-arrow {
            color: #ccc;
        }

        /* 历史记录 */
        .history-list {
            padding: 20px;
        }

        .history-item {
            display: flex;
            background: white;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 15px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .history-thumbnail {
            width: 60px;
            height: 60px;
            background: #f0f0f0;
            border-radius: 8px;
            margin-right: 15px;
        }

        .history-info {
            flex: 1;
        }

        .history-time {
            font-size: 14px;
            color: #999;
            margin-bottom: 5px;
        }

        .history-model {
            font-size: 12px;
            background: #f0f2ff;
            color: #667eea;
            padding: 2px 8px;
            border-radius: 10px;
            display: inline-block;
        }

        .history-actions {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .history-btn {
            padding: 5px 10px;
            border: none;
            border-radius: 5px;
            font-size: 12px;
            cursor: pointer;
        }

        /* 响应式设计 */
        @media (max-width: 375px) {
            .container {
                max-width: 100%;
            }
            
            .bottom-nav {
                width: 100%;
            }
        }

        /* 动画效果 */
        .fade-in {
            animation: fadeIn 0.3s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .loading {
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- 登录页面 -->
        <div id="login" class="page login-page active">
            <div class="logo">🎨</div>
            <div class="app-title">IOPaint</div>
            <div class="app-subtitle">AI智能图像修复工具</div>
            <button class="btn login-btn" onclick="login()">
                <span style="margin-right: 8px;">👤</span>
                微信一键登录
            </button>
        </div>

        <!-- 首页 -->
        <div id="home" class="page">
            <div class="header">
                <h2>IOPaint</h2>
                <p>AI智能图像修复</p>
            </div>
            
            <div class="upload-area" onclick="selectImage()">
                <div class="upload-icon">📷</div>
                <div class="upload-text">点击上传图片或拍照</div>
            </div>

            <div class="quick-actions">
                <div class="action-btn" onclick="chooseFromAlbum()">
                    <div class="action-icon">🖼️</div>
                    <div>从相册选择</div>
                </div>
                <div class="action-btn" onclick="takePhoto()">
                    <div class="action-icon">📸</div>
                    <div>拍照上传</div>
                </div>
                <div class="action-btn" onclick="showHistory()">
                    <div class="action-icon">📝</div>
                    <div>历史记录</div>
                </div>
            </div>
        </div>

        <!-- 编辑器页面 -->
        <div id="editor" class="page">
            <div class="header">
                <h2>图像编辑器</h2>
                <p>绘制需要修复的区域</p>
            </div>

            <div class="editor-container">
                <div class="canvas-area">
                    <img class="preview-image" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='300' height='200'%3E%3Crect width='100%25' height='100%25' fill='%23f0f0f0'/%3E%3Ctext x='50%25' y='50%25' text-anchor='middle' dy='.3em' fill='%23999'%3E预览图像%3C/text%3E%3C/svg%3E" alt="预览图像">
                </div>

                <div class="tools-bar">
                    <button class="tool-btn active" title="画笔">✏️</button>
                    <button class="tool-btn" title="橡皮擦">🧽</button>
                    <button class="tool-btn" title="缩放">🔍</button>
                    <button class="tool-btn" title="撤销">↶</button>
                    <button class="tool-btn" title="重做">↷</button>
                    <button class="tool-btn" title="清除">🗑️</button>
                </div>

                <div class="model-settings">
                    <div class="setting-item">
                        <div class="setting-label">AI模型选择</div>
                        <select class="setting-select">
                            <option value="lama">LAMA (快速模式)</option>
                            <option value="ldm">LDM (高质量模式)</option>
                            <option value="mat">MAT (超高质量)</option>
                        </select>
                    </div>
                    
                    <div class="setting-item">
                        <div class="setting-label">画笔大小</div>
                        <input type="range" class="slider" min="5" max="50" value="15">
                    </div>
                    
                    <div class="setting-item">
                        <div class="setting-label">处理质量</div>
                        <select class="setting-select">
                            <option value="fast">快速处理</option>
                            <option value="balanced">平衡模式</option>
                            <option value="quality">高质量</option>
                        </select>
                    </div>
                </div>

                <button class="process-btn" onclick="startProcessing()">
                    开始AI修复 ✨
                </button>
            </div>
        </div>

        <!-- 进度页面 -->
        <div id="progress" class="page">
            <div class="header">
                <h2>AI处理中</h2>
                <p>请稍等，正在为您修复图像...</p>
            </div>

            <div class="progress-container">
                <div class="progress-circle">
                    <div class="progress-text">30%</div>
                </div>
                
                <div class="progress-status">
                    <div style="font-size: 18px; margin-bottom: 10px;">🤖 AI正在分析图像</div>
                    <div style="color: #999;">已完成: 图像预处理 → 蒙版分析</div>
                </div>

                <div class="eta-info">
                    <div>⏱️ 预计剩余时间: 2分30秒</div>
                </div>
            </div>
        </div>

        <!-- 结果页面 -->
        <div id="result" class="page">
            <div class="header">
                <h2>修复完成</h2>
                <p>查看修复前后对比效果</p>
            </div>

            <div class="result-container">
                <div class="comparison-view">
                    <div class="before-after">
                        <div class="before-image" style="background-image: url('data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'150\' height=\'300\'%3E%3Crect width=\'100%25\' height=\'100%25\' fill=\'%23ffebee\'/%3E%3Ctext x=\'50%25\' y=\'50%25\' text-anchor=\'middle\' dy=\'.3em\' fill=\'%23999\'%3E修复前%3C/text%3E%3C/svg%3E')">
                            <div class="image-label">修复前</div>
                        </div>
                        <div class="after-image" style="background-image: url('data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'150\' height=\'300\'%3E%3Crect width=\'100%25\' height=\'100%25\' fill=\'%23e8f5e8\'/%3E%3Ctext x=\'50%25\' y=\'50%25\' text-anchor=\'middle\' dy=\'.3em\' fill=\'%23999\'%3E修复后%3C/text%3E%3C/svg%3E')">
                            <div class="image-label">修复后</div>
                        </div>
                    </div>
                </div>

                <div class="result-actions">
                    <div class="action-button save-btn" onclick="saveImage()">
                        💾 保存到相册
                    </div>
                    <div class="action-button share-btn" onclick="shareImage()">
                        📤 分享
                    </div>
                    <div class="action-button continue-btn" onclick="continueEdit()">
                        ✏️ 继续编辑
                    </div>
                </div>

                <div style="text-align: center; color: #666; font-size: 14px;">
                    <p>✨ 修复耗时: 2分15秒</p>
                    <p>🤖 使用模型: LAMA</p>
                </div>
            </div>
        </div>

        <!-- 个人中心 -->
        <div id="profile" class="page">
            <div class="profile-header">
                <div class="avatar">👤</div>
                <div class="username">微信用户</div>
                <div class="user-stats">已处理 15 张图片 · 节省 2小时</div>
            </div>

            <div class="menu-list">
                <div class="menu-item" onclick="showHistory()">
                    <div class="menu-icon">📝</div>
                    <div class="menu-text">历史记录</div>
                    <div class="menu-arrow">▶</div>
                </div>
                
                <div class="menu-item">
                    <div class="menu-icon">⚙️</div>
                    <div class="menu-text">设置</div>
                    <div class="menu-arrow">▶</div>
                </div>
                
                <div class="menu-item">
                    <div class="menu-icon">📊</div>
                    <div class="menu-text">使用统计</div>
                    <div class="menu-arrow">▶</div>
                </div>
                
                <div class="menu-item">
                    <div class="menu-icon">💬</div>
                    <div class="menu-text">意见反馈</div>
                    <div class="menu-arrow">▶</div>
                </div>
                
                <div class="menu-item">
                    <div class="menu-icon">❓</div>
                    <div class="menu-text">帮助中心</div>
                    <div class="menu-arrow">▶</div>
                </div>
                
                <div class="menu-item">
                    <div class="menu-icon">ℹ️</div>
                    <div class="menu-text">关于我们</div>
                    <div class="menu-arrow">▶</div>
                </div>
            </div>
        </div>

        <!-- 历史记录页面 -->
        <div id="history" class="page">
            <div class="header">
                <h2>历史记录</h2>
                <p>查看您的修复历史</p>
            </div>

            <div class="history-list">
                <div class="history-item">
                    <div class="history-thumbnail"></div>
                    <div class="history-info">
                        <div class="history-time">2025-06-23 10:30</div>
                        <div class="history-model">LAMA模型</div>
                        <div style="margin-top: 5px; color: #52c41a; font-size: 12px;">✅ 修复成功</div>
                    </div>
                    <div class="history-actions">
                        <button class="history-btn" style="background: #667eea; color: white;">查看</button>
                        <button class="history-btn" style="background: #f5f5f5; color: #666;">删除</button>
                    </div>
                </div>

                <div class="history-item">
                    <div class="history-thumbnail"></div>
                    <div class="history-info">
                        <div class="history-time">2025-06-22 15:45</div>
                        <div class="history-model">LDM模型</div>
                        <div style="margin-top: 5px; color: #52c41a; font-size: 12px;">✅ 修复成功</div>
                    </div>
                    <div class="history-actions">
                        <button class="history-btn" style="background: #667eea; color: white;">查看</button>
                        <button class="history-btn" style="background: #f5f5f5; color: #666;">删除</button>
                    </div>
                </div>

                <div class="history-item">
                    <div class="history-thumbnail"></div>
                    <div class="history-info">
                        <div class="history-time">2025-06-21 09:15</div>
                        <div class="history-model">MAT模型</div>
                        <div style="margin-top: 5px; color: #ff4d4f; font-size: 12px;">❌ 处理失败</div>
                    </div>
                    <div class="history-actions">
                        <button class="history-btn" style="background: #ff7a45; color: white;">重试</button>
                        <button class="history-btn" style="background: #f5f5f5; color: #666;">删除</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- 底部导航 -->
        <div class="bottom-nav">
            <div class="nav-item active" onclick="showPage('home')">
                <div class="nav-icon">🏠</div>
                <div class="nav-text">首页</div>
            </div>
            <div class="nav-item" onclick="showPage('editor')">
                <div class="nav-icon">✏️</div>
                <div class="nav-text">编辑</div>
            </div>
            <div class="nav-item" onclick="showPage('history')">
                <div class="nav-icon">📝</div>
                <div class="nav-text">历史</div>
            </div>
            <div class="nav-item" onclick="showPage('profile')">
                <div class="nav-icon">👤</div>
                <div class="nav-text">我的</div>
            </div>
        </div>
    </div>

    <script>
        // 页面切换功能
        function showPage(pageId) {
            // 隐藏所有页面
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // 显示目标页面
            document.getElementById(pageId).classList.add('active');
            
            // 更新导航状态
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            event.target.closest('.nav-item').classList.add('active');
        }

        // 登录功能
        function login() {
            alert('模拟微信登录成功！');
            showPage('home');
        }

        // 图片选择功能
        function selectImage() {
            alert('模拟选择图片');
            showPage('editor');
        }

        function chooseFromAlbum() {
            alert('从相册选择图片');
            showPage('editor');
        }

        function takePhoto() {
            alert('打开相机拍照');
            showPage('editor');
        }

        // 开始处理
        function startProcessing() {
            showPage('progress');
            
            // 模拟处理进度
            let progress = 0;
            const progressText = document.querySelector('.progress-text');
            const progressCircle = document.querySelector('.progress-circle');
            const statusText = document.querySelector('.progress-status div:first-child');
            
            const interval = setInterval(() => {
                progress += Math.random() * 15;
                if (progress >= 100) {
                    progress = 100;
                    clearInterval(interval);
                    setTimeout(() => {
                        showPage('result');
                    }, 1000);
                }
                
                progressText.textContent = Math.round(progress) + '%';
                progressCircle.style.background = `conic-gradient(#667eea 0deg, #667eea ${progress * 3.6}deg, #f0f0f0 ${progress * 3.6}deg)`;
                
                // 更新状态文本
                if (progress < 30) {
                    statusText.textContent = '🤖 AI正在分析图像';
                } else if (progress < 70) {
                    statusText.textContent = '🎨 正在进行智能修复';
                } else {
                    statusText.textContent = '✨ 正在优化处理结果';
                }
            }, 300);
        }

        // 结果页面功能
        function saveImage() {
            alert('图片已保存到相册！');
        }

        function shareImage() {
            alert('分享功能');
        }

        function continueEdit() {
            showPage('editor');
        }

        // 历史记录
        function showHistory() {
            showPage('history');
        }

        // 初始化
        document.addEventListener('DOMContentLoaded', function() {
            // 模拟自动登录检查
            setTimeout(() => {
                const hasToken = localStorage.getItem('userToken');
                if (hasToken) {
                    showPage('home');
                }
            }, 1000);
        });

        // 响应式处理
        window.addEventListener('resize', function() {
            // 处理屏幕旋转等响应式需求
        });
    </script>
</body>
</html>
